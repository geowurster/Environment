# Print a Python object's source code.  Probably not super robust.


if [[ $# -ne 1 ]]; then
    echo "Prints a Python object's source code."
    echo ""
    echo "Usage: path.to.object"
    return 1
fi


python -c "
from __future__ import print_function

import inspect
import sys


def importer(path_to_object):
    if '.' not in path_to_object:
        return __import__(path_to_object)
    base, obj = path_to_object.rsplit('.', 1)
    m = getattr(__import__(base, fromlist=[obj]), obj)
    return m

try:
    obj = importer('$1')
except Exception as e:
    print(str(e), file=sys.stderr)
    exit(1)

print(inspect.getsource(obj))
" | ${PAGER}
